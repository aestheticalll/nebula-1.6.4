package nebula.client.impl.module.exploit.phase;

import nebula.client.api.eventbus.Listener;
import nebula.client.api.eventbus.Subscribe;
import nebula.client.impl.event.player.EventMove;
import nebula.client.impl.event.player.EventNoClip;
import nebula.client.api.module.Module;
import nebula.client.api.module.ModuleMeta;
import nebula.client.api.value.Setting;
import nebula.client.api.value.SettingMeta;

/**
 * @author Gavin
 * @since 08/26/23
 */
@SuppressWarnings("unused")
@ModuleMeta(name = "Phase",
    description = "Phases through blocks")
public class PhaseModule extends Module
{

  @SettingMeta("Mode")
  private final Setting<PhaseMode> mode = new Setting<>(
      PhaseMode.NO_CLIP);

  @Subscribe
  private final Listener<EventMove> move = event ->
  {
    if (mode.value() == PhaseMode.NO_CLIP)
    {
      event.setY(0);
      mc.thePlayer.motionY = 0;
    }
  };

  @Subscribe
  private final Listener<EventNoClip> noClip = event ->
  {
    if (mc.thePlayer == null || mc.theWorld == null) return;

    if (event.entity().equals(mc.thePlayer)) event.setCanceled(true);
  };
}
